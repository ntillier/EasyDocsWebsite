const e=document.body,t={...window.__CONFIG__,sitemap:void 0},n=window.__CONFIG__.sitemap,o=e=>({...e,children:void 0}),l=(e,t)=>new Promise((n=>{fetch(e,t).then((o=>{if(o.ok)return n(o.json());setTimeout((()=>l(e,t).then(n)),2e3)})).catch((o=>{setTimeout((()=>l(e,t).then(n)),2e3)}))})),i=(e,t)=>{var l=e.getBoundingClientRect(),i=t.getBoundingClientRect();return o.top<n.top||o.right>n.right||o.bottom>n.bottom||o.left<n.left};let r=window.location.pathname,a=!0,s=!0;const c=new Map,d=new Map,h=new Map;let p=[];const u=[];let v,f,g=0,w=!0,k=!1,b=!0;const y=(e,t)=>{const n=p.findIndex((t=>t.hash===e));-1!==n&&(p[n].reading=t)},x=e=>{if(0===g)for(const e of p)e.reading=!1;for(const t of e)!0===t.isIntersecting?(y(t.target.id,!0),g++):(y(t.target.id,!1),w||g--);if(g=Math.max(0,g),0===g&&f)for(let e=p.length-1;e>=0;e--){const t=f.querySelector("#"+p[e].hash)?.getBoundingClientRect();if(t&&t.top-t.height<=80){p[e].reading=!0;break}}w=!1,m.redraw()},C={root:document.getElementById("content"),rootMargin:"0px 0px -20% 0px",threshold:1};let I=new IntersectionObserver(x,C);const B=()=>{g=0,w=!0,p=[];for(const e of f?.querySelectorAll("h1[id], h2[id]")??[])p.push({label:e.textContent,level:"H1"===e.nodeName?1:2,hash:e.id,reading:!1}),I.observe(e);m.redraw()},R=(e,t)=>{0===e.type?(u.push(e.link),h.set(e.link,{...e,parent:o(t)})):d.set(e.link,{...e,parent:o(t),children:e.children.map(o)})},_=e=>{for(const t of e.children)R(t,e),1===t.type&&_(t)},M=()=>{for(const e of n)R(e,void 0),1===e.type&&_(e)},S=e=>{l(`/api/doc${e}.json`).then((t=>{c.set(e,t),s=!1,N()})).catch((()=>{c.set(e,void 0),s=!1,v=void 0,N()}))},$=()=>{const e=r,t=n=>{for(const o of n)if(1===o.type&&e.startsWith(o.link)&&"/"===e.substring(o.link)[0]){o.open=!0,t(o.children);break}};t(n)},q=e=>{$();const n=u.indexOf(e),o=n>0&&-1!==n?u[n-1]:null,l=n<u.length-1&&-1!==n?u[n+1]:null;v={...c.get(e),...h.get(e),...d.get(e),next:l,previous:o},document.title=`${v.label} Â· ${t.title}`},N=()=>{if(r=window.location.pathname,r.endsWith("/")&&r.length>1&&(r=r.slice(0,-1),history.replaceState({},"",r)),h.has(r)){if(a=!0,!c.has(r))return S(r);q(r)}else d.has(r)?(a=!0,v=d.get(r),$()):(a=!1,v=void 0);m.redraw.sync(),B(),T(),b=!1},O=e=>{window.history.pushState({},e,e),e=window.location.pathname,k=!1,N()},T=()=>{window.location.hash?document.querySelector(`.body ${window.location.hash}`)?.scrollIntoView():document.querySelector(".body").scrollTop=0},E={view:e=>m("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"arrow",onclick:e.attrs.onclick},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":2,d:"M9 5l7 7-7 7"}))},j={view:e=>m("div",{class:"category","max-height":""},e.attrs.children.map((t=>{if(0===t.type){if(e.attrs.level>1&&t.link===e.attrs.parent)return;return m("a",{href:t.link,class:t.link===r?"current-link":"",onclick:e=>{O(t.link),e.preventDefault()}},m("span",t.label))}if(1===t.type){const n=m(j,{children:t.children,level:e.attrs.level+1,parent:t.link});return 0===e.attrs.level?[m("h1",t.label),n]:[m("a",{class:t.link===r?"current-link":"",open:t.open,href:t.link,onclick:e=>{e.preventDefault(),e.currentTarget===e.target&&(t.open=!0,O(t.link))}},[m("span",t.label),m(E,{onclick:()=>t.open=!t.open})]),n]}})))},H={view:()=>m("div",{class:"notfound"},[m("h1","O.o"),m("span","Page not found")])},P={view:e=>m("div",{class:"redirect",onclick:()=>O(e.attrs.child.link)},[m("span",e.attrs.child.label),m(E)])},U={view(e){const t=h.get(e.attrs.link);return m("div",{class:e.attrs.class,onclick:()=>O(e.attrs.link)},[m(E),m("div",[m("span",e.attrs.label+(t.parent?.label&&t.parent.label!==v.parent?.label?` - ${t.parent.label}`:"")),m("label",t.label)])])}},A={oncreate:()=>{Array.from(document.getElementsByClassName("category")).forEach((e=>e.style.setProperty("--max-height",e.offsetHeight+e.scrollHeight+100+"px")))},view:()=>m("nav",{class:k?"open":""},m(j,{level:0,children:n,parent:""}))},D={view:()=>m("div",{class:"links"},t?.header?.links?.map((e=>m("a",{href:e.link,target:"_blank"},e.label)))??[])},W=()=>({view:()=>m("header",[m("div",{class:"menu"},[m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",id:"menu-button",onclick:()=>k=!k},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"})]),m("img",{src:t?.header?.icon}),m("h1",t?.header?.title)]),m(D)])}),F={onupdate(){f=document.getElementById("content");for(const e of f.querySelectorAll("a[href]"))new URL(document.baseURI).origin===new URL(e.href,document.baseURI).origin&&(e.target=void 0,e.href.startsWith("#")||(e.onclick=t=>{t.preventDefault(),O(e.href)}));b&&(I=new IntersectionObserver(x,{...C,root:document.querySelector(".body")}),T())},view:()=>m("div",{class:"content",id:"content"},[m("div",{class:"article",id:"article"},a&&v?0===v.type||v?.content?[m.trust(v?.content),m("div",{class:"bottom-nav"},[null!==v.previous?m(U,{class:"before",label:"Previous",link:v.previous}):void 0,null!==v.next?m(U,{class:"after",label:"Next",link:v.next}):void 0])]:m("div",{class:"redirects-column"},[m("h1",v.label),...v.children.map((e=>m(P,{child:e})))]):m(H)),m(D)])},G={onupdate(e){const t=e.instance.children;for(let r=t.length-1;r>=0;r--)if("active"===t[r].attrs.className){n=e.dom,o=t[r].dom,l=void 0,i=void 0,l=n.getBoundingClientRect(),((i=o.getBoundingClientRect()).top<l.top||i.right>l.right||i.bottom>l.bottom||i.left<l.left)&&(e.dom.scrollTop=t[r].dom.offsetTop);break}var n,o,l,i},view:()=>m("aside",p.map((e=>m("a",{style:`--level:${e.level};`,href:`#${e.hash}`,class:e.reading?"active":""},e.label))))},L={view:()=>m("main",[m(W),m("div",{class:"body"},[m(A),m(F),m(G)])])};M(),N();const V=document.createElement("link");V.rel="icon",document.head.appendChild(V),V.href=t.favicon,m.mount(document.body,L),window.onpopstate=()=>{N()},window.onhashchange=()=>{T()};